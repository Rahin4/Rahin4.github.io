const audiobundle = [
  {
    songname: "amio thaki jege",
    band: "bangla song",
    src: "musics/Amio Thaki Jege - Recall ( Album_ Onnothay ).m4a",
    state: false,
    img: "img/amithaki.jpg",
    Id: 1,
  },
  {
    songname: "bahara",
    band: "hindi song",
    src: "musics/Bahara Full Video - I Hate Luv Storys_Sonam Kapoor, Imran_Shreya Ghoshal, Sona M.m4a",
    state: false,
    img: "img/I-Hate-Luv-Storys-Hindi-2010-20190603134705-500x500.jpg",
    Id: 2,
  },
  {
    songname: "ganja gun",
    band: "bob marley",
    src: "musics/Bob Marley - Ganja Gun.m4a",
    state: false,
    img: "img/size_m.jpg",
    Id: 3,
  },
  {
    songname: "chader sathe",
    band: "classic bangla",
    src: "musics/Chader Sathe _ চাঁদের সাথে আমি _ Jafor Iqbal & Anju _ Runa & Andrew _ Ashirbad _.m4a",
    state: false,
    img: "img/maxresdefault.jpg",
    Id: 4,
  },

  {
    songname: "cholo bristy te bhiji",
    band: "habib wahid",
    src: "musics/Cholo Brishti Te bhiji _ Amar Ache Jol _ Movie Song _ আমার আছে জল । Habib Wahid .m4a",
    state: false,
    img: "img/artworks-000034945012-kwmls7-t500x500.jpg",
    Id: 5,
  },

  {
    songname: "fix-you",
    band: "coldplay",
    src: "musics/Coldplay - Fix You (Official Video).m4a",
    state: false,
    img: "img/images.jpg",
    Id: 6,
  },
  {
    songname: "the scientist",
    band: "coldplay",
    src: "musics/coldplay the scintist.m4a",
    state: false,
    img: "img/images.jpg",
    Id: 7,
  },
  {
    songname: "dil laga diya",
    band: "bollywood song",
    src: "musics/Dil Laga Liya Maine Tumse Pyaar Karke _ अलका याग्निक उदित नारायण _ प्रिटी ज़िंटा.m4a",
    state: false,
    img: "img/maxresdefault (1).jpg",
    Id: 8,
  },
  {
    songname: "dil se dil",
    band: "bollywood song",
    src: "musics/Dil Se Dil - Official Music Video _ Sita Ramam _ Vishal Chandrashekhar _ Shashwa.m4a",
    state: false,
    img: "img/Sita-Ramam-Hindi-Original-Motion-Picture-Soundtrack-Hindi-2022-20220905152715-500x500.jpg",
    Id: 9,
  },
  {
    songname: "poem of allama iqbal",
    band: "gazal",
    src: "musics/Enchanting poems of Allama Iqbal _ আল্লামা ইকবালের মুগ্ধকরা কবিতা _ Allama Iqbal.m4a",
    state: false,
    img: "img/allama-iqbal.png",
    Id: 10,
  },
  {
    songname: "neel jochona",
    band: "ferdous wahid",
    src: "musics/Ferdous Wahid _ Neel Jochona _ নীল জোছনা _ Official Music Video _ Sangeeta.m4a",
    state: false,
    img: "img/images (1).jpg",
    Id: 12,
  },
  {
    songname: "nightcall",
    band: "kavinsky",
    src: "musics/Kavinsky - Nightcall (Without the robot voice) - Short Version (ZM Musics).m4a",
    state: false,
    img: "img/Kavinsky_Nightcall_2010.png",
    Id: 13,
  },
  {
    songname: "killye killye",
    band: "hindi song",
    src: "musics/Kiliye Kiliye _ Guts Come Closer _ Dj Sekhar _ S Janaki _ Full Version.mp3",
    state: false,
    img: "img/Ji-Malayalam-2023-20230817231705-500x500.jpg",
    Id: 14,
  },
  {
    songname: "the show",
    band: "lenka",
    src: "musics/lenka-the show.m4a",
    state: false,
    img: "img/Lenka_-_The_Show.jpg",
    Id: 14,
  },
  {
    songname: "buttercup",
    band: "jack stauber",
    src: "musics/MV _ Jack Stauber - Buttercup.m4a",
    state: false,
    img: "img/maxresdefault (2).jpg",
    Id: 14,
  },
  {
    songname: "o mahi o mahi",
    band: "bollywood hindi song",
    src: "musics/O Mahi O Mahi(PagalWorld.com.cm).mp3",
    state: false,
    img: "img/O-Maahi-From-Dunki-Hindi-2023-20231211171007-150x150.jpg",
    Id: 15,
  },
  {
    songname: "o mon pakhi",
    band: "bangla song",
    src: "musics/O Mon Pakhi _ Mon Je Kore Uru Uru _ Koel _ Hiraan _ Shreya Ghoshal _ Rana Majumd.m4a",
    state: false,
    img: "img/Mon-Je-Kore-Uru-Uru-Bengali-2020-20201203174912-500x500.jpg",
    Id: 16,
  },
  {
    songname: "ore nil doriya",
    band: "bangla song",
    src: "musics/Ore Nil Doriya│Sareng Bou│Farooque│Kabori Sarwar│Bangla Old Movie Song.m4a",
    state: false,
    img: "img/hqdefault.jpg",
    Id: 17,
  },
  {
    songname: "pap jomai",
    band: "chirkut",
    src: "musics/Paap Jomai Chirkut Song Aynabaji, Aynabaji Movie Song , Chonchol (1).m4a",
    state: false,
    img: "img/artworks-000187882182-kyqs04-t500x500.jpg",
    Id: 18,
  },
  {
    songname: "chadni jaisa rang",
    band: "pankaj udhas",
    src: "musics/Pankaj Udhas - Chandi Jaisa Rang.m4a",
    state: false,
    img: "img/The-Very-Best-Of-Pankaj-Udhas-Live-Vol-3-Hindi-1991-20190924060931-500x500.jpg",
    Id: 19,
  },
  {
    songname: "learning to fly",
    band: "pink floyd",
    src: "musics/Pink Floyd - Learning To Fly (Official Music Video HD).m4a",
    state: false,
    img: "img/sddefault.jpg",
    Id: 20,
  },
  {
    songname: "sajde",
    band: "hindi song",
    src: "musics/sajde (slowed & reverb).m4a",
    state: false,
    img: "img/images (2).jpg",
    Id: 21,
  },
  {
    songname: "fields of gold",
    band: "sting",
    src: "musics/Sting - Fields Of Gold.mp3",
    state: false,
    img: "img/Fields-of-gold-sting.jpg",
    Id: 22,
  },
  {
    songname: "tera ban jaunga",
    band: "hindi song",
    src: "musics/tera ban jaunga (slowed & reverb).m4a",
    state: false,
    img: "img/artworks-000575101799-retbj9-t500x500.jpg",
    Id: 23,
  },
  {
    songname: "meomoy reboot",
    band: "narvent",
    src: "musics/VØJ, Narvent - Memory Reboot (4K Music Video).m4a",
    state: false,
    img: "img/artworks-8zY79hHzgzoNqx9O-qPGziw-t500x500.jpg",
    Id: 24,
  },
  {
    songname: "yellow",
    band: "coldplay",
    src: "musics/yellow.mp3",
    state: false,
    img: "img/Yellow_cover_art.jpg",
    Id: 25,
  },
  {
    songname: "80's morning show",
    band: "bangla song",
    src: "musics/মনে পড়ে ৮০ দশকের বিটিভির সেই সুর। 80's morning show music of Bangladesh Televisi.m4a",
    state: false,
    img: "img/unnamed.png",
    Id: 26,
  },
  
];

// end of audiobudle which consisted audios
// //////////////////////////////////////////////////
// declaring all of the variables
// ///////////////////////////////////////////////////

const playinggif = document.querySelector(".playinggif");
const songcollection = document.querySelector(".songcollection");

const playbutton = document.querySelector("#playbtn");
const forwardbtn = document.querySelector("#forwardboo");

const backbutton = document.querySelector("#backbtn");

let nowindex = 0;

// starting the display of songs in the sidesong section.
// starting the display of songs in the sidesong section.
/////////////////////////////////////////////////////////

const sidesongs = (songcollection.innerHTML = audiobundle.map(function (
  value,
  index
) {
  return `
    
     <div class="songsonebyone">
    <span class="indexinallsong">${index}</span>
      <img src="${value.img}" alt="" class="images">
      <div class="songdetail-inone">
     <h2 class="songname">${value.songname}</h2>
     <h3 class="band"> ${value.band}</h3>
    
    </div>     
    <i class="fa-solid fa-play" id="inplay"></i>
    </div>`;
}));

// ending the display of songs in the sidesong section.
// ending the display of songs in the sidesong section.

// starting the display of songs in the trending section.
// starting the display of songs in the trending section.





let trendingarray=[];

trendingarray.push(...audiobundle.slice(-20));




const popularsong = document.querySelector(".popularsongs");
popularsong.innerHTML = trendingarray.map(function (value, index) {
  return `

    
    <div class="popsonsec">
    
    <div class="info-on-img">
    <h3>${value.songname}</h3>
      <span>${value.band}</span>
      
    </div>
  
  </div>`;
});

const helltrend=Array.from(document.querySelectorAll('.popsonsec'))

helltrend.forEach(function(e,i){
  e.addEventListener('click',function(){
    Musicx.src=trendingarray[i].src;
        songdetails.innerHTML = `<div class="songdetails">
        <h2>${trendingarray[i].songname}</h2>
        <span>${trendingarray[i].band}</span> </div>`;
    playpause()
  })
})

// ending the display of songs in the trending section.//////////////////////////

// declaring the playpause functionality///////////////////////////////////////////////////
const songsonebyonecollection = Array.from(
  document.querySelectorAll(".songsonebyone")
);
const popsonsec = Array.from(document.querySelectorAll(".popsonsec"));
const inplay = Array.from(document.querySelectorAll("#inplay"));
// console.log(inplay)
// console.log(songsonebyonecollection)

function playpause() {
  if (Musicx.paused || Musicx.currentTime <= 0) {
    Musicx.play();
    playbutton.classList.add("fa-circle-pause");
    playbutton.classList.remove("fa-circle-play");
    playinggif.style.opacity = 1;
    //    console.log(inplay[nowindex])
    //    inplay[nowindex].classList.add('fa-pause');
    //    inplay[nowindex].classList.remove('fa-play')
    //     songsonebyonecollection[nowindex].style.backgroundColor='white'
  } else {
    Musicx.pause();
    playbutton.classList.add("fa-circle-play");
    playbutton.classList.remove("fa-circle-pause");
    playinggif.style.opacity = 0;
    //     // inplay[nowindex].classList.add('');
    //     songsonebyonecollection[nowindex].style.backgroundColor=''
    //     inplay[nowindex].classList.add('fa-play');
    //    inplay[nowindex].classList.remove('fa-pause')
  }
}

// ending the playpause functionality /////////////////////////////////////

//the masterplay section /////////////////////////////

const Musicx = new Audio(audiobundle[1].src);
const songdetails = document.querySelector(".songdetails");

// popsonsec.forEach(function (e, i) {
//   e.addEventListener("click", function (k) {
//     Musicx.src = audiobundle[i].src;
//     // console.log(Musicx)

//     songdetails.innerHTML = `<div class="songdetails">
//         <h2>${audiobundle[i].songname}</h2>
//         <span>${audiobundle[i].band}</span> </div>`;

//     playpause();
//   });
// });

playbutton.addEventListener("click", function () {
  playpause();
});

//ending of the masterplay section /////////////////////////////

const songsonebyone = Array.from(document.querySelectorAll(".songsonebyone"));
songsonebyone.forEach(function (e, i) {
  e.addEventListener("click", function () {
    nowindex = i;
    Musicx.src = audiobundle[i].src;
    songdetails.innerHTML = `<div class="songdetails">
        <h2>${audiobundle[i].songname}</h2>
        <span>${audiobundle[i].band}</span> </div>`;
    // if(Musicx.paused || Musicx.currentTime<=0){
    //     e.style.backgroundColor="aliceblue"
    // }
    // else{
    //     e.style.backgroundColor='blue'
    // }

    playpause();
  });
});

// back and forward button functionalitty////////////////////////
////////////////////////////////////////////////////////////////

backbutton.addEventListener("click", function () {
  nowindex = nowindex - 1;
  if (nowindex >= 0 && nowindex <= audiobundle.length) {
    // console.log(nowindex)
    Musicx.src = audiobundle[nowindex].src;
    playpause();
    songdetails.innerHTML = `<div class="songdetails">
    <h2>${audiobundle[nowindex].songname}</h2>
    <span>${audiobundle[nowindex].band}</span> </div>`;
  } else {
    nowindex = 0;
  }
});

forwardbtn.addEventListener("click", function () {
  nowindex = nowindex + 1;
  if (nowindex >= 0 && nowindex <= audiobundle.length) {
    //         console.log(audiobundle.length)
    //  console.log(nowindex)
    Musicx.src = audiobundle[nowindex].src;
    playpause();
    songdetails.innerHTML = `<div class="songdetails">
 <h2>${audiobundle[nowindex].songname}</h2>
 <span>${audiobundle[nowindex].band}</span> </div>`;
  } else {
    nowindex = 0;
  }
});

// back and forward button functionalitty////////////////////////
////////////////////////////////////////////////////////////////

// start of // volume//range//sound//-============section..

const ranger = document.querySelector(".rangetime");
// console.log(Musicx);
Musicx.addEventListener("timeupdate", function () {
  let progress = parseInt((Musicx.currentTime / Musicx.duration) * 100);
  ranger.value = progress;
});

ranger.addEventListener("change", function () {
  Musicx.currentTime = (ranger.value * Musicx.duration) / 100;
});

const volume = document.querySelector("#volume");
const volrange = document.querySelector(".rangevol");

volrange.addEventListener("click", function () {
  movevol(this.value);
});

function movevol(vol) {
  Musicx.volume = vol;
}

// volume//range//sound//-============section..// end of

// song in hero////////////////////////////////////

const btnplay = document.querySelector(".btnhabib");
btnplay.addEventListener("click", function () {
  Musicx.src = audiobundle[5].src;
  btnplay.innerHTML = "play";
  songdetails.innerHTML = `<div class="songdetails">
 <h2>${audiobundle[7].songname}</h2>
 <span>${audiobundle[7].band}</span> </div>`;

  playpause();
});
/////////////////////////////////////////////////

// duration and currenttime sec
////////////////////////////////////////////////

function formatTime(time) {
  const minutes = Math.floor(time / 60);
  const seconds = Math.floor(time % 60);
  return `${minutes}:${seconds}`;
}

const duracarr = document.querySelector(".duracurr");

Musicx.addEventListener("timeupdate", function () {
  const currtime = formatTime(this.currentTime);
  duratime = formatTime(Musicx.duration);
  duracarr.innerHTML = `${currtime}/${duratime}`;
});

//////////////////////////////////////////////////////////

// soundcontroller button///////////////
////////////////////////////////////////

const rangevol = document.querySelector(".rangevol");
let isRAngevolvisible = false;

volume.addEventListener("click", function () {
  if (!isRAngevolvisible) {
    rangevol.style.opacity = 1;
    isRAngevolvisible = true;
    volume.style.color = "white";
  } else {
    rangevol.style.opacity = 0;
    isRAngevolvisible = false;
    volume.style.color = "lightgreen";
  }
});

const smallnav = document.querySelector(".fa-bars-staggered");
const navelem = document.querySelector(".navelements");

//preventdefault in js
/////////////////////////////
const categorybtn = document.querySelectorAll(".categorybtn");

document.addEventListener("DOMContentLoaded", function () {
  categorybtn.forEach(function (btnca) {
    btnca.addEventListener("click", function (event) {
      event.preventDefault();
    });
  });
});

////////////////////////////
const habibsong = document.querySelector(".habibsong");
// let issmallnav = false;
// smallnav.addEventListener("click", function () {
//   if (window.innerWidth <= 600 && !issmallnav) {
//     navelem.style.display = "block";
//     smallnav.style.color = "green";
//     issmallnav = true;
//     habibsong.style.display = "none";
//   } else {
//     smallnav.style.color = "white";
//     issmallnav = false;
//     navelem.style.display = "none";
//     habibsong.style.display = "block";
//   }
// });





/////////////////////////////////////////////////////
// activate the feature later
//////////////////////////////////////////////////////

// const rotatebtn=document.querySelector('.fa-rotate');
// let isrotatekliked=false;
// let no=0;

// rotatebtn.addEventListener('click',function(){
//    if(!isrotatekliked){
//     isrotatekliked=true;
//     rotatebtn.style.color='white';

//   }
//   else{
//     isrotatekliked=false;
//     rotatebtn.style.color='gold';

//   }

// });

//////////////////////////////////////////////
/////////////////////////////////////////////

const playingarea = document.querySelector(".playingarea");
const songsli = document.querySelector(".songsli");
const songslielem = document.querySelector(".songslielem");
const playlistli = document.querySelector(".playlistli");
const playlistelem = document.querySelector(".playlistelem");
const aboutus = document.querySelector(".aboutuss");
const aboutuselem = document.querySelector(".aboutuselem");
const aboveitems = document.querySelector(".aboveitems");
const songsonebyone11 = document.querySelector(".songsonebyone11");
const songdetail11 = document.querySelector(".songdetail-inone11");
const allplaylistname = document.querySelector(".allplaylistname");
const topmostcontainer = document.querySelector(".topmostcontainer");

// songsli page///////////////////
/////////////////////////////////

songsli.addEventListener("click", function () {
  playingarea.style.display = "none";
  songslielem.style.display = "block";
  playlistelem.style.display = "none";
  aboutuselem.style.display = "none";
  const headdiv = document.createElement("div");
  headdiv.classList.add("songslielemheading");
  headdiv.innerHTML = `<h1>all songs</h1>
  <h1>sisme</h1>`;

  let songsinsongs = (aboveitems.innerHTML = audiobundle
    .map(function (value, i) {
      return `
    
    <div class="songsonebyone11">
    <span class="indexinallsong11">${i}</span>
      <img src="${value.img}" alt="" class="images">
      <div class="songdetail-inone11">
     <h2 class="songname">${value.songname}</h2>
     <h3 class="band">${value.band}</h3>
    
    </div>     
    <i class="fa-solid fa-play" id="inplay11" ></i>
    </div>`;
    })
    .join(""));

  const aboveallsong = Array.from(
    document.querySelectorAll(".songsonebyone11")
  );

  aboveallsong.forEach(function (e, i) {
    e.addEventListener("click", function () {
      Musicx.src = audiobundle[i].src;
      songdetails.innerHTML = `<div class="songdetails">
      <h2>${audiobundle[i].songname}</h2>
      <span>${audiobundle[i].band}</span> </div>`;
      playpause();
    });
  });
});

////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////

///////////////////////////sismelipage/////////////////
/////////////////////////////////////////////////////

const sismeli = document.querySelector(".sisme");
sismeli.addEventListener("click", function () {
  playingarea.style.display = "block";
  songslielem.style.display = "none";
  playlistelem.style.display = "none";
  aboutuselem.style.display = "none";
});
////////////////////////////////////////////////////////
//////////////////////////////////////////////////////
///////////////////////////////////////////////////

///////////playlist li page//////////////////////////////
////////////////////////////////////////////////////////

playlistli.addEventListener("click", function () {
  playlistelem.style.display = "block";
  songslielem.style.display = "none";
  playingarea.style.display = "none";
  aboutuselem.style.display = "none";
});

let bandarray = [];

audiobundle.forEach(function (value) {
  bandarray.push(value.band);
});

const bandcounter = function (array) {
  let bands = {};
  array.forEach(function (value) {
    bands[value] = (bands[value] || 0) + 1;
  });

  return bands;
};

x = bandcounter(bandarray);

let htmlcontent = "";
for (let key in x) {
  htmlcontent += `
  <div class="topcontainer">
  <h1>${key}</h1>

  </div>
  `;
}

topmostcontainer.innerHTML = htmlcontent;

const topcontainer = document.querySelectorAll(".topcontainer");
const playitems = document.querySelector(".playitems");
const lowerplaylist = document.querySelector(".lowerplaylist");

const valarray = [];

topcontainer.forEach(function (value) {
  value.addEventListener("click", function (e) {
    valarray.length = 0;
    audiobundle.forEach(function (val, index) {
      if (e.target.innerText === val.band) {
        // console.log(val);
        valarray.push(val);
      }
    });
    lowerplaylist.innerHTML = valarray
      .map(function (ee, ii) {
        return ` <div class="songsclass">
        <span class="indexplayitems">${ii}</span>
        <div class="playiteminfo">
          <h2 class="playsongname">${ee.songname}</h2>
         <h3 class="playbandname">${ee.band}</h3>
       </div>
     </div>`;
      })
      .join("");
    const songsclass = Array.from(document.querySelectorAll(".songsclass"));
    console.log(songsclass);

    songsclass.forEach(function (e, i) {
      e.addEventListener("click", function () {
        Musicx.src = valarray[i].src;
        songdetails.innerHTML = `<div class="songdetails">
        <h2>${valarray[i].songname}</h2>
        <span>${valarray[i].band}</span> </div>`;

        playpause();
      });
    });
  });
});

///////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////

aboutus.addEventListener("click", function () {
  aboutuselem.style.display = "block";
  // aboutuselem.innerHTML='we are working';
  playlistelem.style.display = "none";
  songslielem.style.display = "none";
  playingarea.style.display = "none";
});

const ulofli = Array.from(document.querySelectorAll(".ulofli"));
const isclicked = false;
ulofli.forEach(function (value, index) {
  value.addEventListener("click", function () {
    console.log(index);
  });
});






// search functionality///////////////
/////////////////////////////////////////

// console.log(playingarea)
// const mainsearch=document.querySelector('.mainsearch, .mainsearch');

// let userarr=[];

// const data=audiobundle.map(function(e){
//   let createli=document.createElement('li');
//  createli=e.songname;

//   // console.log(createli)
//   userarr.push(createli)
// })

// // console.log(userarr)
// const hell=document.querySelector('.hell')

// mainsearch.addEventListener('input',function(e){
//   const val=e.target.value;
//   userarr.map(function(currelem){
//     const elemtext=currelem.toLowerCase()
//     if(elemtext.includes(val.toLowerCase())){
//       console.log(elemtext)
//       hell.innerHTML=elemtext;
//       playingarea.style.display='none'

//     }
//     else{

//     }
//   })
//   console.log(val)

// })

// /////////////////////////
